#!/bin/bash
usage(){
    echo import a directory $benoitHome/a/b/c inside $HOME/a/b/c.
    echo replace everything but store old files with difference in c/rsyncback
    echo usage:
    echo   SyncBenoitBack [args1 .. ]
    echo example:
    echo   SyncBenoitBack testRepertoryToSyncho/
}
benoitHome=/home/robaux

rep=$(realpath $1)
ssrep=$(echo $rep | awk -F "/" '{$1=$2=$3=""; print $0 "\n"}') 
ssrep=$(echo $ssrep |  awk -v OFS="/" '{$1=$1; print $0}')
dir=$benoitHome/$ssrep
if [ -d $1 ];then
    dir=$dir/
fi



	#rep=$(pwd) 
	#dir=$rep/$1
	#echo rsync -e ssh -ravz $1 myBen:$dir
	#rsync -e ssh -ravz $1 myBen:$dir

if [[ "$#" -ne "1" ]]; then
    echo "illegal number of parameters (!=1)"
    usage
else
	rsync -e ssh -ravz $1 myBen:$dir
fi

